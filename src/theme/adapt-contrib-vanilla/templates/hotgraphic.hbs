<div class="component__inner hotgraphic__inner">

  {{> component this}}

  <div class="component__widget hotgraphic__widget{{#unless _useGraphicsAsPins}} is-pin{{else}} is-tile{{/unless}}{{#if _graphic.attribution}} has-attribution{{/if}}">

    {{#unless _useGraphicsAsPins}}

    <img class="hotgraphic__image" src="{{_graphic.src}}" {{#if _graphic.alt}}aria-label="{{_graphic.alt}}"{{else}}aria-hidden="true"{{/if}}>

    {{#if _graphic.attribution}}
    <div class="component__attribution hotgraphic__attribution">
      <div class="component__attribution-inner hotgraphic__attribution-inner">
        {{{_graphic.attribution}}}
      </div>
    </div>
    {{/if}}

    <div class="hotgraphic__pin-item-container" role="list">

      {{#each _items}}
      <div class="hotgraphic__pin-item" role="listitem">
        <button class="btn-icon hotgraphic__pin item-{{@index}}{{#if _graphic._classes}} {{_graphic._classes}}{{/if}}{{#if _pin.src}} has-pin-image{{/if}}{{#if _isVisited}} is-visited{{/if}} js-hotgraphic-item-click" data-index="{{@index}}" style="top: {{{_top}}}%; left: {{{_left}}}%;">

          <span class="aria-label">{{title}}.</span>

          {{#if _pin.src}}
          <div class="hotgraphic__pin-image-container item-{{@index}}">
            <img class="hotgraphic__pin-image" src="{{_pin.src}}">
          </div>
          {{else}}
          <div class="icon"></div>
          {{/if}}

        </button>

      </div>

      {{/each}}
      
    </div>
    <div class="hotgraphic-popup">
        <div class="hotgraphic-popup__inner">

            {{#each _items}}
            <div class="hotgraphic-popup__item{{#if _classes}} {{_classes}}{{/if}}{{#if _isVisited}} is-visited{{/if}}{{#if _isActive}} is-active{{/if}}{{#if ../_isRound}} is-round{{/if}}" data-index={{@index}}{{#unless _isActive}} aria-hidden="true"{{/unless}}>

                <div class="hotgraphic-popup__item-content">
                <div class="hotgraphic-popup__item-content-inner">

                    {{#if title}}
                    <div{{#if _isActive}} id="notify-heading"{{/if}} class="hotgraphic-popup__item-title" {{a11y_attrs_heading 'notify'}}>
                    <div class="hotgraphic-popup__item-title-inner">
                        {{{title}}}
                    </div>
                    </div>
                    {{/if}}

                    {{#if body}}
                    <div class="hotgraphic-popup__item-body">
                    <div class="hotgraphic-popup__item-body-inner">
                        {{{compile body}}}
                    </div>
                    </div>
                    {{/if}}

                </div>
                </div>

                <div class="hotgraphic-popup__item-image-container{{#if _graphic.attribution}} has-attribution{{/if}}">

                <img class="hotgraphic-popup__item-image" src="{{_graphic.src}}" {{#if _graphic.alt}}aria-label="{{_graphic.alt}}"{{else}}aria-hidden="true"{{/if}}>

                {{#if _graphic.attribution}}
                <div class="component__attribution hotgraphic-popup__item-attribution">
                    <div class="component__attribution-inner hotgraphic-popup__item-attribution-inner">
                    {{{_graphic.attribution}}}
                    </div>
                </div>
                {{/if}}

                </div>

            </div>
            {{/each}}

            </div>

            <div class="hotgraphic-popup__toolbar{{#if _hidePagination}} hide-pagination{{/if}}">

              <button class="btn-icon hotgraphic-popup__close js-hotgraphic-popup-close" aria-label="{{_globals._accessibility._ariaLabels.closePopup}}">
                  <div class="icon"></div>
              </button>

            </div>

            {{a11y_wrap_focus}}
    </div>

    {{else}}

    <div class="hotgraphic__tile-item-container" role="list">

      {{#each _items}}
      <div class="hotgraphic__tile-item" role="listitem">

        <button class="hotgraphic__tile item-{{@index}}{{#if _graphic._classes}} {{_graphic._classes}}{{/if}}{{#if _isVisited}} is-visited{{/if}} js-hotgraphic-item-click" data-index="{{@index}}">

          <span class="aria-label">{{title}}.</span>

          <img class="hotgraphic__tile-image" src="{{_graphic.src}}">

        </button>

      </div>
      {{/each}}

    </div>

    {{/unless}}

  </div>

</div>
